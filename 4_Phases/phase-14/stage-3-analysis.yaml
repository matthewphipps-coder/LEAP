metadata:
  type: "stage-artifact"
  phase: 14
  phaseName: "Factory Vision Alignment"
  stage: 3
  stageName: "analysis"
  created: "2026-01-19T11:46:00Z"
  completedDate: "2026-01-19T11:49:00Z"
  status: "complete"
  previousStage: "4_Phases/phase-14/stage-2-research.yaml"

analysisObjective: "Finalize structure decisions and identify risks/approach options"

# =============================================================================
# FINALIZED GOLD SOURCE STRUCTURE
# =============================================================================

finalizedStructure:
  
  decision: "Option 1 - Consolidated GoldSource folder"
  rationale: "Single source of truth, self-contained, factory is unaware of LEAP"
  
  structure: |
    2_GoldSource/
    ├── scaffold/                       # Code (from current DemoFactory/src/)
    │   ├── index.html
    │   ├── core/
    │   │   ├── app.js
    │   │   ├── state.js
    │   │   ├── logger.js
    │   │   ├── error-handler.js
    │   │   └── mock-data.js
    │   ├── ui/
    │   │   ├── styles/
    │   │   └── components/
    │   └── features/
    │       └── dashboard/
    │
    ├── archetypes/
    │   └── agentic-dashboard/
    │       ├── archetype.yaml          # Manifest
    │       └── preview.png             # Optional
    │
    ├── meta/                           # Architecture + Standards
    │   ├── ARCHITECTURE.yaml           # DUPLICATED (factory unaware of LEAP)
    │   ├── architectural-standards.yaml
    │   └── functionality.yaml
    │
    └── governance/                     # Factory's own governance
        ├── FACTORY_README.yaml         # Entry point for factory AI
        ├── factory-protocol.yaml       # How factory operates
        ├── lifecycle-stages.yaml       # 8 stages with gates
        ├── demo-rules.yaml             # Consistency rules
        └── templates/
            ├── stage-1-discovery.yaml
            ├── stage-2-research.yaml
            ├── stage-3-analysis.yaml
            ├── stage-4-design.yaml
            ├── stage-5-implementation.yaml
            ├── stage-6-delivery.yaml
            ├── stage-7-testing.yaml
            ├── stage-8-closure.yaml
            └── CURRENT_STATE.yaml      # Demo tracking template

# =============================================================================
# CHANGES REQUIRED
# =============================================================================

changesRequired:
  
  renames:
    - from: "DemoFactory/"
      to: "2_GoldSource/"
    - from: "DemoFactory/src/"
      to: "2_GoldSource/scaffold/"
  
  moves:
    - from: "DemoFactoryResources/architectural-standards.yaml"
      to: "2_GoldSource/meta/architectural-standards.yaml"
    - from: "DemoFactoryResources/functionality.yaml"
      to: "2_GoldSource/meta/functionality.yaml"
    - from: "ARCHITECTURE.yaml"
      to: "2_GoldSource/meta/ARCHITECTURE.yaml"
      note: "DUPLICATE - keep original in LEAP root as well"
  
  creates:
    - "2_GoldSource/archetypes/agentic-dashboard/archetype.yaml"
    - "2_GoldSource/governance/FACTORY_README.yaml"
    - "2_GoldSource/governance/factory-protocol.yaml"
    - "2_GoldSource/governance/lifecycle-stages.yaml"
    - "2_GoldSource/governance/demo-rules.yaml"
    - "2_GoldSource/governance/templates/*.yaml (8 stage templates)"
    - "2_GoldSource/governance/templates/CURRENT_STATE.yaml"
  
  deletes:
    - "DemoFactoryResources/ (absorbed into GoldSource)"

# =============================================================================
# RISK ASSESSMENT
# =============================================================================

riskAssessment:
  
  risks:
    - risk: "Git history disruption from rename"
      severity: "low"
      mitigation: "Use git mv for proper tracking"
    
    - risk: "ARCHITECTURE.yaml duplication drift"
      severity: "medium"
      mitigation: "Document that LEAP version is master, copy to GoldSource on update"
    
    - risk: "Factory governance files not comprehensive enough"
      severity: "medium"
      mitigation: "Test with a real factory run after creation"
    
    - risk: "Breaking existing code references"
      severity: "low"
      mitigation: "DemoFactory was self-contained, no external deps"

# =============================================================================
# APPROACH OPTIONS
# =============================================================================

approachOptions:
  
  option1_fullRestructure:
    description: "Complete restructure in one phase"
    steps:
      - "Rename DemoFactory → GoldSource"
      - "Move files to new structure"
      - "Create all governance files"
      - "Delete DemoFactoryResources"
      - "Update ARCHITECTURE.yaml (both copies)"
    pros: "Clean, complete, done in one phase"
    cons: "More work upfront"
    recommended: true
  
  option2_incrementalRestructure:
    description: "Restructure in multiple phases"
    steps:
      - "Phase 14: Create governance files"
      - "Phase 15: Rename folders"
      - "Phase 16: Create archetype manifests"
    pros: "Smaller increments"
    cons: "Multiple phases, state between phases unclear"
    recommended: false

# =============================================================================
# DESIGN INPUTS
# =============================================================================

designInputs:
  
  questionsResolved:
    architectureYaml: "DUPLICATE to 2_GoldSource/meta/"
    factoryReadme: "Contains identity, instructions, stages, first steps"
    demoNaming: "NEXUS vx.x.x-feature"
    factoryGovernance: "Self-contained gold copy, simplified from LEAP"
  
  forDesign:
    - "Exact content of FACTORY_README.yaml"
    - "Exact content of factory-protocol.yaml"
    - "Exact content of lifecycle-stages.yaml"
    - "Exact content of demo-rules.yaml"
    - "Stage template structures"

# =============================================================================
# NEXT STAGE
# =============================================================================

nextStage:
  name: "design"
  requires: "!Proceed"
  focus: "Create detailed file specifications for all new governance files"

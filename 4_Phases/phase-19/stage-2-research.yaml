# =============================================================================
# PHASE 19: FACTORY TASK TEMPLATE
# STAGE 2: RESEARCH
# =============================================================================

metadata:
  phase: 19
  phaseName: "FactoryTaskTemplate"
  stage: 2
  stageName: "research"
  created: "2026-01-20T13:12:00Z"
  status: "complete"
  author: "AI Architect"
  previousStage: "stage-1-discovery.yaml"

# =============================================================================
# RESEARCH OBJECTIVE
# =============================================================================

objective: "Identify exact requirements that should be baked into each stage section of the Factory Task Template"

# =============================================================================
# SOURCES REVIEWED
# =============================================================================

sourcesReviewed:
  - file: "2_GoldSource/governance/lifecycle-stages.yaml"
    purpose: "Stage definitions, inputs, outputs"
  - file: "2_GoldSource/governance/demo-rules.yaml"
    purpose: "Code standards, naming conventions, locked/flexible rules"
  - file: "2_GoldSource/governance/artifact-manifest.yaml"
    purpose: "Artifact locations (factory workspace vs demo output)"
  - file: "2_GoldSource/meta/architectural-standards.yaml"
    purpose: "Path naming conventions, locked files, extension points"
  - file: "FactoryTestRuns/governance-compliance-audit-v2.0.0-v2.0.1.yaml"
    purpose: "What specifically failed in recent runs"

# =============================================================================
# FINDINGS BY STAGE
# =============================================================================

stageRequirements:

  stage1_discovery:
    objective: "Define demo requirements from user scenario"
    fixedItems:
      - "Document demo name, scenario, archetype"
      - "List key features and flows"
      - "Create stage-1-discovery.yaml → FACTORY_WORKSPACE"
    noComplianceIssuesFound: true
  
  stage2_research:
    objective: "Review scaffold, identify gaps"
    fixedItems:
      - "Review scaffold structure and capabilities"
      - "Identify gaps vs requirements"
      - "Create stage-2-research.yaml → FACTORY_WORKSPACE"
    noComplianceIssuesFound: true
  
  stage3_analysis:
    objective: "Risk assessment, approach options"
    fixedItems:
      - "Identify risks"
      - "Compare approach options"
      - "Create stage-3-analysis.yaml → FACTORY_WORKSPACE"
    noComplianceIssuesFound: true
  
  stage4_design:
    objective: "Implementation plan, wireframes"
    fixedItems:
      - "Create implementation plan"
      - "Generate wireframes for UI changes"
      - "Create stage-4-design.yaml → FACTORY_WORKSPACE"
    complianceIssue:
      problem: "Wireframes saved to brain/ or artifacts/ instead of factory workspace"
      source: "governance-compliance-audit (phantom wireframes)"
    requiredReminder: |
      ⚠️ WIREFRAME LOCATION: Save ALL wireframe images to FACTORY_WORKSPACE
      NOT brain/, NOT artifacts/, NOT demo output
  
  stage5_implementation:
    objective: "Build demo based on design"
    fixedItems:
      - "Implement design changes"
      - "Add AI-First headers to new files"
      - "Add MODULE_CONTRACT to new modules"
      - "Update functionality.yaml IN DEMO OUTPUT"
      - "Create stage-5-implementation.yaml → FACTORY_WORKSPACE"
    complianceIssues:
      - problem: "Path naming: used plural (incidents/) instead of singular (incident/)"
        source: "architectural-standards.yaml line 135"
        requiredReminder: "Use SINGULAR path naming: features/incident/, not incidents/"
      - problem: "functionality.yaml not updated"
        source: "lifecycle-stages.yaml line 108"
        requiredReminder: "Update meta/functionality.yaml in DEMO OUTPUT with new features"
    additionalReminders:
      - "File names: kebab-case (incident-data.js)"
      - "Locked files: DO NOT modify core/state.js, core/firebase.js, ui/styles/*"
      - "New components: ui/components/{name}/ with {name}-ui.js + {name}.css"
  
  stage6_validation:
    objective: "Verify all Discovery features implemented"
    fixedItems:
      - "Compare Discovery requirements to functionality.yaml"
      - "Verify README.md exists"
      - "Confirm deployment readiness"
      - "Create stage-6-validation.yaml → FACTORY_WORKSPACE"
    noComplianceIssuesFound: true
  
  stage7_testing:
    objective: "Test demo in browser"
    fixedItems:
      - "Start server: python3 -m http.server 8080"
      - "Test all features"
      - "Record test evidence"
      - "Create stage-7-testing.yaml → FACTORY_WORKSPACE"
    complianceIssue:
      problem: "Screenshots/recordings saved to wrong location"
      source: "governance-compliance-audit, LEAP-009"
    requiredReminder: |
      ⚠️ TEST EVIDENCE LOCATION: Save ALL screenshots and recordings to FACTORY_WORKSPACE
      NOT brain/, NOT artifacts/
  
  stage8_closure:
    objective: "Lessons learned, sign-off"
    fixedItems:
      - "Document lessons learned"
      - "Create README.md in DEMO OUTPUT"
      - "Identify Gold Source improvements"
      - "Create stage-8-closure.yaml → FACTORY_WORKSPACE"
    noComplianceIssuesFound: true

# =============================================================================
# TEMPLATE FORMAT DECISION
# =============================================================================

templateFormat:
  decision: "Markdown (.md)"
  rationale:
    - "AI naturally creates task.md files in Markdown"
    - "Checkboxes work natively: - [ ] item"
    - "Easy to copy and adapt"
    - "Human readable"
  
  alternativeConsidered: "YAML"
  whyNotYaml: "AI would still create its own task.md, might ignore YAML task file"

# =============================================================================
# MINIMUM VIABLE CONTENT
# =============================================================================

minimumViableContent:
  structure: |
    1. Workspace reference section (paths)
    2. One section per stage (8 total)
    3. Each section has:
       - Stage objective
       - Fixed checklist items (with location reminders)
       - Placeholder for demo-specific items
  
  criticalItems:
    - "Stage 4: Wireframe save location warning"
    - "Stage 5: Singular path naming, functionality.yaml update"
    - "Stage 7: Test evidence save location warning"
  
  estimatedLength: "~100-150 lines"

# =============================================================================
# NEXT STAGE
# =============================================================================

nextStage:
  name: "analysis"
  focus: "Assess risks and confirm approach"
  requires: "!Proceed"

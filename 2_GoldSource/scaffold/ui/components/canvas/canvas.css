/**
 * @file canvas.css
 * @purpose Styles for the main canvas area (V2 Masonry)
 * @layer ui
 */

/* Main Container (main.canvas) */
.canvas {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    width: 100%;
    /* Layout: Clear Fixed Header & Sidebar */
    padding-top: calc(var(--header-height) + var(--space-lg));
    padding-left: calc(var(--sidebar-pill-width) + var(--sidebar-gap) * 2);
    padding-right: var(--space-lg);
}

/* Wrapper for Header + ScrollArea */
.canvas-wrapper {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    overflow: hidden;
}


.horizon-header {
    flex-shrink: 0;
    /* Stays fixed */
    padding: var(--space-lg) var(--space-xl) var(--space-md);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.nexus-scroll-area {
    flex-grow: 1;
    overflow-y: auto;
    /* Independent scroll */
    padding: 0 var(--space-xl) 100px;
    /* Bottom padding for scroll clearance */
}

/* =============================================================================
   LAYOUT ENGINE: MASONRY
   ============================================================================= */

.nexus-canvas.grid-mode,
.nexus-canvas-grid {
    display: block;
    /* Required for columns */
    column-count: 3;
    /* Fixed 3 columns for Desktop/Laptop */
    column-gap: var(--space-xl);
    align-content: start;
    width: 100%;
}

/* Card Separation in Masonry */
.nexus-canvas.grid-mode .nexus-card {
    margin-bottom: var(--space-xl);
    /* Vertical gap */
    width: 100%;
    /* Ensure fill */
}

/* Mobile: Not Supported (Hide) */
@media (max-width: 700px) {
    .nexus-canvas.grid-mode {
        display: none;
    }

    .nexus-scroll-area::after {
        content: "Desktop or Tablet required for Canvas View";
        display: block;
        text-align: center;
        margin-top: 50px;
        color: var(--text-secondary);
    }
}

/* =============================================================================
   FREEFORM MODE
   ============================================================================= */

.nexus-canvas.freeform-mode {
    display: block;
    position: relative;
    min-height: 800px;
    /* Drag space */
}

.nexus-canvas.freeform-mode .nexus-card {
    position: absolute;
    width: 300px;
    /* Fixed width */
    margin: 0;
    transition: transform 0.2s, top 0.2s, left 0.2s;
    /* Smooth movement */
}

.nexus-canvas.freeform-mode .nexus-card:hover {
    z-index: 50;
    /* Pop to front on hover */
}

/* =============================================================================
   LIST MODE (Grouped)
   ============================================================================= */

.nexus-canvas.list-mode {
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
    width: 100%;
    /* Removed max-width to fill screen */
}

.list-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.list-group-header {
    font-family: var(--font-heading);
    font-size: var(--text-lg);
    color: var(--text-secondary);
    border-bottom: 1px solid var(--glass-border);
    padding-bottom: var(--space-sm);
    margin-bottom: var(--space-sm);
}

.nexus-canvas.list-mode .nexus-card {
    width: 100%;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-sm) var(--space-md);
}
metadata:
  type: "stage-artifact"
  phase: 25
  phaseName: "ThemeExtensionGuide"
  stage: 1
  stageName: "discovery"
  created: "2026-01-21T07:01:00Z"
  status: "in-progress"
  backlogItem: "LEAP-040"

# =============================================================================
# PROBLEM STATEMENT
# =============================================================================

problemStatement: |
  Factory AI has NO guidance on theme/styling anywhere in its reading flow.
  When Factory reads governance docs (FACTORY_README → factory-protocol → lifecycle-stages → 
  demo-rules → stage templates), it never encounters design-system.yaml or any styling guidance.
  
  Result: Factory may create demos with incorrect colors, missing glassmorphism, no animations,
  or inconsistent styling because it doesn't know the design system exists.

# =============================================================================
# AUDIT FINDINGS - "gov==code" Analysis
# =============================================================================

auditFindings:

  factoryReadme:
    file: "GoldSource/governance/FACTORY_README.yaml"
    currentState:
      meta:
        files:
          - "ARCHITECTURE.yaml"
          - "architectural-standards.yaml"
          - "functionality.yaml"
    gap: "design-system.yaml NOT listed - Factory doesn't know it exists"
    fix: "Add design-system.yaml to meta.files list"

  factoryTaskTemplate:
    file: "GoldSource/governance/FACTORY_TASK_TEMPLATE.md"
    currentState:
      stage5Refs:
        - "lifecycle-stages.yaml (Stage 5 section)"
        - "demo-rules.yaml (code standards, locked files)"
        - "meta/architectural-standards.yaml (lines 130-170)"
        - "artifact-manifest.yaml (lines 72-75)"
    gap: "No reference to design-system.yaml or styling guidance"
    fix: "Add design-system.yaml reference to Stage 5 reading list"

  demoRules:
    file: "GoldSource/governance/demo-rules.yaml"
    currentState:
      - "noInlineStyles: true, reason: 'Use CSS variables and classes'"
      - "scaffoldRules.locked includes ui/styles/*"
      - "cssVariables: --category-name pattern"
    gap: "Mentions CSS variables but doesn't point to design-system.yaml for values"
    fix: "Add reference to design-system.yaml in codeStandards section"

  lifecycleStages:
    file: "GoldSource/governance/lifecycle-stages.yaml"
    gap: "No mention of design/styling in any stage"
    fix: "Not needed - keep lifecycle stages architecture-agnostic"

  stageTemplates:
    stage4Design:
      file: "governance/templates/stage-4-design.yaml"
      gap: "No guidance on visual design or styling"
      fix: "Add optional styling section with design-system.yaml reference"
    stage5Implementation:
      file: "governance/templates/stage-5-implementation.yaml"
      gap: "No reminder to use design system"
      fix: "Add styling compliance check to mandatory content"

  metaFiles:
    designSystemYaml:
      file: "GoldSource/meta/design-system.yaml"
      status: "EXISTS - Updated in Phase 24 with plasma/brand/animation docs"
      gap: "Contains tokens but lacks 'How To Extend' guide"
    architecturalStandards:
      file: "GoldSource/meta/architectural-standards.yaml"
      status: "EXISTS - Has lockedFileExtensions.cssFiles section"
      gap: "Extension mechanism documented but no styling workflow"

# =============================================================================
# SCOPE - What LEAP-040 Will Deliver
# =============================================================================

scope:
  primaryDeliverable:
    name: "theme-extension-guide.yaml"
    location: "GoldSource/meta/"
    purpose: "Step-by-step guide for Factory AI to extend/customize themes"
    sections:
      - "Brand customization workflow (3-color system)"
      - "Glass utility patterns with light/dark theme handling"
      - "Animation utility patterns (.animate-in, .hover-lift)"
      - "Light theme quirks (different variables, blend modes)"
      - "Common mistakes and how to avoid them"

  governanceUpdates:
    - file: "FACTORY_README.yaml"
      change: "Add design-system.yaml + theme-extension-guide.yaml to meta.files"
    
    - file: "FACTORY_TASK_TEMPLATE.md"
      change: "Add design-system.yaml reference to Stage 5 reading list"
    
    - file: "demo-rules.yaml"
      change: "Add styling section with design-system.yaml reference"
    
    - file: "templates/stage-4-design.yaml"
      change: "Add optional visualDesign section"

# =============================================================================
# ACCEPTANCE CRITERIA (from LEAP-040)
# =============================================================================

acceptanceCriteria:
  - "GoldSource/meta/theme-extension-guide.yaml created with step-by-step examples"
  - "Brand customization workflow documented (--brand-primary, --brand-secondary, --brand-accent)"
  - "Glass utility patterns documented (.glass, light theme differences)"
  - "Animation utility patterns documented (.animate-in, .hover-lift)"
  - "Light theme quirks documented (different glass values, blend modes)"
  - "[NEW] Factory governance files reference the design system"

# =============================================================================
# QUESTIONS FOR RESEARCH
# =============================================================================

questionsForResearch:
  Q-001:
    question: "What's in design-system.yaml now after Phase 24?"
    status: "answered"
    answer: "Contains brandColorSystem, plasmaBackground, animationUtilities sections"
  
  Q-002:
    question: "What does Factory actually need to know?"
    status: "pending"
    needsResearch: "Review actual variables.css to extract key customization points"
  
  Q-003:
    question: "Are there any other meta files we should reference?"
    status: "pending"
    needsResearch: "List meta/ directory"

status: "complete"

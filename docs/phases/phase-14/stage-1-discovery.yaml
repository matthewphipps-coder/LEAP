metadata:
  type: "stage-artifact"
  phase: 14
  phaseName: "Factory Vision Alignment"
  stage: 1
  stageName: "discovery"
  created: "2026-01-19T11:12:00Z"
  status: "in-progress"
  previousPhase: "Phase 13 - DemoFactory Prototype"

discoveryObjective: "Restructure DemoFactory to be a process engine (workflow) rather than a demo instance"

# =============================================================================
# CONTEXT: PHASE 13 LEARNINGS + VISION CLARIFICATION
# =============================================================================

phase13Learnings:
  whatWasBuilt:
    description: "A working web app scaffold with Agentic Dashboard archetype"
    files: 20
    linesOfCode: 3267
    status: "Verified working"
  
  misconception:
    ai_understood: "DemoFactory = the demo itself (the output)"
    actual_vision: "DemoFactory = the PROCESS that creates demos (the workflow)"
  
  technicalLearnings:
    - "ES Modules require local server (cannot use file:// protocol)"
    - "Relative import paths are error-prone (../../ vs ../../../)"
    - "AI-First annotations proved valuable for dependency tracking"
    - "Scaffold-first approach works well"

# =============================================================================
# VISION CLARIFICATION
# =============================================================================

visionClarification:
  
  components:
    LEAP:
      role: "Governance layer + Gold Source"
      contains:
        - "GoldSource/ - Master copies of scaffold and archetypes"
        - "DemoFactoryResources/ - Standards, templates"
        - "DemoFactory/ - Process engine (NOT output)"
    
    GoldSource:
      role: "Protected master copies"
      purpose: "Copied outward when starting a new demo"
      contents:
        - "scaffold/ - Core locked components"
        - "archetypes/ - Template patterns (e.g., Agentic Dashboard)"
        - "standards/ - Rules and architecture doc"
    
    DemoFactory:
      role: "Process engine / workflow orchestrator"
      purpose: "Guides user through creating a safe, reliable demo"
      notTheDemoItself: true
    
    DemoInstances:
      role: "Output demos"
      location: "OUTSIDE of LEAP"
      differentiation: ["Content", "Archetype", "Customer-specific"]

  executionModel:
    type: "Hybrid (AI + Human)"
    gates: "!Proceed at every stage (identical to LEAP)"
    scenarioSource: "User input"

# =============================================================================
# FACTORY WORKFLOW
# =============================================================================

factoryWorkflow:
  
  criticalCorrection:
    issue: "Gold Source copy must happen FIRST, before Discovery"
    reason: |
      The factory process needs context to operate:
      - "What's already here?" (code scaffold)
      - "What functionality exists?" (functionality.yaml)
      - "What are the constraints?" (architectural-standards.yaml)
      - "What's the playing field?" (ARCHITECTURE.yaml)
    resolution: "Initialization step BEFORE standard stages"
  
  goldSourceContents:
    description: "Everything the factory needs to operate"
    includes:
      - "Code scaffold (core locked components)"
      - "Archetypes (UI patterns)"
      - "ARCHITECTURE.yaml (playing field)"
      - "architectural-standards.yaml (rules)"
      - "functionality.yaml (what exists)"
      - "Factory CURRENT_STATE.yaml template (track progress)"
  
  process:
    step0_initialization:
      name: "Factory Initialization"
      gate: "!StartFactory"
      actions:
        - "User provides: demo name, location, scenario description"
        - "Copy Gold Source → Demo Instance location"
        - "Initialize demo-specific tracking (CURRENT_STATE.yaml)"
      outcome: "Factory has full context to begin work"
    
    stages_1_to_8:
      note: "IDENTICAL to LEAP lifecycle stages"
      stages:
        - stage: 1
          name: "Discovery"
          purpose: "Define demo requirements based on user scenario"
          gate: "!Proceed"
        
        - stage: 2
          name: "Research"
          purpose: "Explore patterns, components, APIs needed"
          gate: "!Proceed"
        
        - stage: 3
          name: "Analysis"
          purpose: "Risk assessment, approach options"
          gate: "!Proceed"
        
        - stage: 4
          name: "Design"
          purpose: "Implementation plan, file structure"
          gate: "!Proceed"
        
        - stage: 5
          name: "Implementation"
          purpose: "AI implements with human oversight"
          gate: "!Proceed"
        
        - stage: 6
          name: "Delivery"
          purpose: "Package, document"
          gate: "!Proceed"
        
        - stage: 7
          name: "Testing"
          purpose: "Verify demo works as intended"
          gate: "!Proceed"
        
        - stage: 8
          name: "Closure"
          purpose: "Finalize, handoff, lessons learned"
          gate: "Executive sign-off"

# =============================================================================
# PROBLEM STATEMENT
# =============================================================================

problemStatement:
  current: "Phase 13 built a demo instance in DemoFactory/"
  needed: "DemoFactory should be a process engine; scaffold belongs in GoldSource/"
  
  changesRequired:
    - rename: "DemoFactory/ → GoldSource/"
    - create: "DemoFactory/ as process engine"
    - define: "factory-workflow.yaml with phases 1-8"
    - document: "Copy-out process for starting new demos"
    - update: "ARCHITECTURE.yaml to reflect new structure"

# =============================================================================
# QUESTIONS FOR RESEARCH
# =============================================================================

questionsForResearch:
  structure:
    - "Exact folder structure for GoldSource (scaffold vs archetype separation?)"
    - "How should archetypes be packaged? Folders? Manifests?"
    - "Where specifically should demo instances be created? ~/Documents/DemoInstances?"
  
  process:
    - "What does the factory engine look like? YAML workflow? CLI? AI prompt?"
    - "How does the copy-out process work? Full copy or selective?"
    - "How is demo-specific content differentiated from scaffold?"
  
  governance:
    - "Does each demo instance need its own CURRENT_STATE.yaml?"
    - "Should demo instances track their parent archetype version?"
    - "How do we handle updates to GoldSource after demos are created?"

# =============================================================================
# SCOPE
# =============================================================================

scope:
  inScope:
    - "Restructure existing code from DemoFactory/ to GoldSource/"
    - "Create DemoFactory/ as process engine skeleton"
    - "Define factory-workflow.yaml"
    - "Update ARCHITECTURE.yaml"
    - "Document the new structure"
  
  outOfScope:
    - "Building a full CLI or UI for the factory (future phase)"
    - "Creating additional archetypes (future phase)"
    - "Actually running the factory to create a demo (future phase)"

# =============================================================================
# NEXT STAGE
# =============================================================================

nextStage:
  name: "research"
  requires: "!Proceed"
  focus: "Answer questions about folder structure, process engine, governance"

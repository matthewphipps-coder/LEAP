# Stage T-2: Define & Document
# DISCO-002: NEXUS Integration Layer

stage:
  id: "T-2"
  name: "Define & Document"
  status: "complete"
  completedAt: "2026-01-23T11:56:00Z"

deliverables:
  - name: "SPEC-NEXUS-integration.yaml"
    path: "T-2_Define/SPEC-NEXUS-integration.yaml"
    status: "complete"
    description: |
      Build-ready functional specification for Factory AI.
      Contains architecture, event contracts, API endpoints,
      Firebase schema, MCP tools, and implementation checklist.

specSummary:
  architecture:
    - "Browser (NEXUS UI + Firebase Client)"
    - "Cloud (Orchestrator → AI Service → MCP Server)"
    - "SoR (ServiceNow via MCP)"

  events:
    - "intent.submit (Browser → Cloud)"
    - "message.ai (Cloud → Browser)"
    - "field.propose (Cloud → Browser)"
    - "field.commit (Browser → Cloud)"
    - "field.commit.result (Cloud → Browser)"
    - "activity.open (Browser → Cloud)"
    - "activity.context (Cloud → Browser)"

  dataContracts:
    - "ActivityField"
    - "FieldProposal"
    - "FieldCommit"
    - "FieldCommitResult"
    - "Card (Firebase)"
    - "Message (Firebase)"

  apiEndpoints:
    - "POST /api/intent"
    - "GET /api/activity/{activityId}"
    - "POST /api/commit"

  hosting:
    orchestrator: "Firebase Functions"
    mcpServer: "Cloud Run"
    persistence: "Firestore"

nextSteps:
  - "Proceed to T-1: Functional Spec (review and lock)"

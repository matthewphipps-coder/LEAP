metadata:
  type: "state"
  purpose: "Single source of truth for current LEAP work"
  lastUpdated: "2026-01-16T04:24:00Z"
  version: "3.0.0"

aiMustRead:
  - "READ THIS FILE FIRST - at start of every session"
  - "This tells you exactly where we are"
  - "Never assume - check this file for truth"
  - "Update this after every major decision or phase transition"

projectContext:
  name: "LEAP"
  tagline: "AI-First Workflow Assistant"
  version: "v6.8.0-partnership"
  currentFocus: "AI Code Nirvana - Governance system at elite level"
  vision: "See VISION.yaml for complete vision (dual-purpose: shows AI-first future + proves AI demo creation)"

currentPhase:
  number: "21.3"
  name: "CSS Architecture Fix"
  status: "complete"
  stage: "closure"
  startedDate: "2026-01-16T02:31:43Z"
  completedDate: "2026-01-16T03:00:00Z"
  
  summary: "Resolved BUG-001: Removed duplicate CSS loading from index.html"
  result: "CSS modifications now apply immediately, unblocked BUG-002"
  
  details: "See docs/phases/phase-21.3/ for stage artifacts and PHASE_21.3_CLOSURE.yaml"

nextPhase:
  number: "21.4"
  name: "Theme Architecture Unification (BUG-004)"
  status: "proposed"
  
  context: "BUG-002 partially resolved - dark theme fixed, light theme blocked by architecture debt"
  
  options:
    - "Phase 21.4: Fix BUG-003/004 (theme architecture unification)"
    - "Defer BUG-003/004, move to other work"
    - "New feature from backlog"
  
  recommendation: "Review bugs.yaml for BUG-003/004 details before deciding"
  
  details: "See bugs.yaml for complete bug status and backlog.yaml for other options"

previousPhase:
  number: "21.3"
  name: "CSS Architecture Fix"
  status: "complete"
  completedDate: "2026-01-16T03:00:00Z"
  
  details: "See docs/phases/phase-21.2f/ for stage artifacts"

currentActivity:
  status: "between-phases"
  lastWork: "BUG-002 (Card Visibility) - Partially resolved"
  
  summary:
    completed:
      - "BUG-002: Dark theme cards fixed and user-validated ‚úÖ"
      - "Git committed: All changes saved (commit 42d0840)"
      - "Bugs logged: BUG-003 (light theme) and BUG-004 (architecture debt)"
    
    remaining:
      - "BUG-003: Light theme cards still washed out"
      - "BUG-004: Theme architecture inconsistency (technical debt)"
    
    context: "Dark/light themes use different CSS patterns (color-mix vs rgba)"
  
  nextPhase: "21.4 (proposed) - Theme Architecture Unification"
  nextStage: "discovery"
  
  aiReminders:
    - "‚úÖ BUG-002 dark theme DONE - user confirmed working"
    - "‚ö†Ô∏è BUG-003 light theme OPEN - requires BUG-004 fix"
    - "üìã Read bugs.yaml for complete BUG-003/004 details"
    - "üéØ Proposed: Unify themes to use color-mix() pattern (20-30 min)"
    - "‚è∏Ô∏è Alternative: Defer BUG-003/004, work on other priorities"

references:
  purpose: "Where to find information removed from this file"
  
  historicalData:
    location: "docs/phases/phase-*/PHASE_*_CLOSURE.yaml"
    contains: "Phase summaries, accomplishments, lessons learned, decisions"
    example: "Phase 20 summary ‚Üí docs/phases/phase-20/PHASE_20_CLOSURE.yaml"
  
  knownIssues:
    location: "bugs.yaml"
    contains: "All known bugs and issues"
  
  featureBacklog:
    location: "backlog.yaml"
    contains: "Feature roadmap, Phase 21 preview, priorities"
  
  governanceFiles:
    command: "ls *.yaml"
    contains: "List of all governance YAML files in root"
  
  workflows:
    command: "ls .agent/workflows/"
    contains: "List of all workflow files"
  
  stageArtifacts:
    location: "pulse-protocol.yaml (lines 762-849)"
    contains: "Stage artifacts system documentation"
  
  architecture:
    location: "ARCHITECTURE.yaml"
    contains: "System architecture, module structure, data flow"

latestBackup:
  name: "LEAP-phase-21.2d-complete"
  date: "2026-01-16T01:08:58Z"
  note: "See safety-protocol.yaml for backup policy"

howToUseThisDoc:
  forAI:
    sessionStart:
      - "Read this file FIRST at start of every session"
      - "Check currentPhase to see where we are"
      - "Check currentActivity to see what you should do"
      - "Check aiReminders for critical context"
    
    beforeCoding:
      - "If nextPhase is CODE type, complete Rule 13 technical onboarding"
      - "Read ARCHITECTURE.yaml (1,283 lines)"
      - "Read bugs.yaml for relevant issues"
      - "Examine affected files"
    
    whenLost:
      - "Run !pulse to reset governance context"
      - "Check references section for where to find detailed info"
      - "Read phase closure docs for historical context"
  
  forHuman:
    - "This file shows current state only (not historical archive)"
    - "For historical data, see docs/phases/phase-*/PHASE_*_CLOSURE.yaml"
    - "For detailed phase info, see stage artifacts in docs/phases/phase-*/"
    - "Update this file after phase transitions and major decisions"

aiReminders:
  - "This file is CURRENT STATE only - historical data is in closure docs"
  - "For file lists, query filesystem (ls, tree, find)"
  - "For detailed phase info, see stage artifacts and closure docs"
  - "Rule 13 applies to CODE phases only (not governance/documentation phases)"
  - "Always run !pulse at session start to reset governance context"
  - "Never assume - verify current state in this file"
